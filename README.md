## ghosts — GitHub hosts and RouterOS helpers

Ghosts is a small Node.js utility that resolves GitHub-related hostnames and generates several useful artifacts for
local DNS/hosts management and RouterOS automation. It's designed to help improve access performance by producing
up-to-date IP lists and DNS static records you can import into routers or local hosts files.

Key outputs

- `hosts` — traditional hosts file (one A and one AAAA entry per domain)
- `hosts.mdns` — mosdns-compatible hosts file (one line per domain with multiple addresses: A... AAAA...)
- `github-ip-list.rsc` — MikroTik address-list (IPv4 under `/ip firewall address-list`, IPv6 under `/ipv6 firewall address-list`)
- `github-dns-list.rsc` — RouterOS DNS static records (`/ip dns static`), records include `type=A` or `type=AAAA`
- `github-ipv4-list.rsc`, `github-ipv6-list.rsc` — generated by GitHub meta fetcher (separate IPv4/IPv6 lists)

Why this project

- Automates DNS/hosts maintenance for GitHub domains
- Produces RouterOS-friendly .rsc files to import on MikroTik devices
- Supports multiple addresses per domain and preserves backward compatibility

Quick start

Prerequisites: Node.js 16+ (project uses ESM and Node's built-in test runner)

Install & run:

```bash
# from project root
npm install
npm start
```

This will resolve configured domains and write the generated files to the repository root by default. For tests and
programmatic usage you can pass an `outputDir` option to control where files are written (tests use `./tmp/`).

RouterOS import example

You can fetch and import generated `.rsc` files on a MikroTik router. See `README.ros.md` for full examples. A short
snippet to import the DNS static records looks like:

```rs
 :log info "start download github-dns-list.rsc ..."
 /tool fetch http-method=get url=https://raw.githubusercontent.com/lazywalker/ghosts/refs/heads/master/github-dns-list.rsc
 :log info "github-dns-list downloaded."
 /file {
     /import file=github-dns-list.rsc
     :log info "GitHub DNS list updated!"
     remove github-dns-list.rsc
 }
```

Testing

Run the project tests with Node's test runner:

```bash
npm test
```

Tests write temporary files into `./tmp/` (ignored by `.gitignore`) so they won't modify the committed example files.

Contributing

PRs and issues welcome. Keep changes small and include tests for any new behavior. If you change output formats,
update the RouterOS examples accordingly.

License

GPL-3.0 (see `LICENSE`)

中文简介

Ghosts 用于解析 GitHub 相关主机并生成 hosts / RouterOS 导入文件，方便在路由器或本地机器上导入和自动化更新。
